#ifndef DS3231_SIMPLE_H#define DS3231_SIMPLE_H#include <Arduino.h>#include <Wire.h>class DS3231_Simple {public:  struct DateTime {    uint16_t year;  // 2000..2099 (поддерживается +100 при установленном битe century)    uint8_t  month; // 1..12    uint8_t  day;   // 1..31    uint8_t  hour;  // 0..23 (в библиотеке — всегда 24ч)    uint8_t  minute;// 0..59    uint8_t  second;// 0..59  };  // Инициализация I2C. Если указать пины — вызовет Wire.begin(sda,scl); иначе использует уже инициированный Wire.  bool begin(int sda = -1, int scl = -1, uint32_t i2cClock = 100000UL);  // Чтение/запись времени  bool readTime(DateTime &t);  bool writeTime(const DateTime &t);  // Температура DS3231, °C (с шагом 0.25)  float readTemperature();  // Управление осциллятором и флагами  bool setClockHalt(bool halt);     // EOSC: true=останавливать при батарее, false=запускать  bool clearOSF();                  // сбросить флаг OSF (бит 7 статуса)  bool isOSFSet(bool &set);         // прочитать флаг OSF (true=был остановлен)  bool set24h();                    // принудительно перевести в 24ч режим  // Простой «пинг» (проверка присутствия устройства)  bool ping();private:  static const uint8_t I2C_ADDR = 0x68;  // регистры  static const uint8_t REG_SEC     = 0x00;  static const uint8_t REG_MIN     = 0x01;  static const uint8_t REG_HOUR    = 0x02;  static const uint8_t REG_DOW     = 0x03;  static const uint8_t REG_DATE    = 0x04;  static const uint8_t REG_MONTH   = 0x05; // бит 7 = century  static const uint8_t REG_YEAR    = 0x06;  static const uint8_t REG_CONTROL = 0x0E; // EOSC бит 7  static const uint8_t REG_STATUS  = 0x0F; // OSF бит 7  static const uint8_t REG_TEMP_MSB= 0x11;  static const uint8_t REG_TEMP_LSB= 0x12;  // I2C низкоуровневые  bool readBytes(uint8_t reg, uint8_t *buf, uint8_t len);  bool writeBytes(uint8_t reg, const uint8_t *buf, uint8_t len);  // BCD <-> BIN  static uint8_t bcd2bin(uint8_t v) { return v - 6 * (v >> 4); }  static uint8_t bin2bcd(uint8_t v) { return v + 6 * (v / 10); }};#endif // DS3231_SIMPLE_H